{% load static %}
<!DOCTYPE html>
<html>
    <head>
        <title>{{ title }}</title>
        <link rel="stylesheet" href="{% static 'css/report.css' %}">
    </head>
    {% if outputs %}
    <body>
        <div class="header-container">
            <div class="header-title">
                <h2>GLADYMAR</h1>
                <h2>POTOSI - BOLIVIA</h2>
            </div>
            <div class="header-second-title">
                <h2>REPORTE DE SALIDAS</h2>
            </div>
        </div>
        <div>
            <table>
                {% for output in outputs %}
                    <tr>
                        <th>AGENCIA</th>
                        <th>ALMACENERO</th>
                        <th>CLIENTE</th>
                        <th>FECHA DE SALIDA</th>
                        <th>NÂ° DE RECIBO</th>
                    </tr>
                    <tr>
                        <td>{{ output.agency.name }}</td>
                        <td>{{ output.warehouse_keeper.first_name }} {{ output.warehouse_keeper.last_name }}</td>
                        <td>{{ output.client.name }}</td>
                        <td>{{ output.output_date|date:"d/m/Y" }}</td>
                        <td>{{ output.invoice_number }}</td>
                    </tr>
                    {% for output_item in output.output_items.all %}
                        {% if forloop.first %}
                            <tr>
                                <th class="table-secondary-header">PRODUCTO</th>
                                <th class="table-secondary-header">CANTIDAD</th>
                            </tr>
                        {% endif %}
                        <tr>
                            <td>{{ output_item.product_stock.product.name }}</td>
                            <td>{{ output_item.quantity }}</td>
                        </tr>
                    {% endfor %}
                {% endfor %}
            </table>
        </div>
        <div class="footer">
            <div class="date-container">
                <p>Potosi, {{ today|date:"j \\d\\e F \\d\\e Y"|lower }}</p>
            </div>
        </div>
    </body>
    {% else %}
        <div class="no-outputs">
            <h2>No hay salidas en el rango de fechas seleccionado.</h2>
        </div>
    {% endif %}
</html>
